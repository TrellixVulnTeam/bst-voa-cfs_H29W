{% extends "layout.html" %}

{% block pageTitle %}
Uploaded report files
{% endblock %}

{% block beforeContent %}

	<div class="govuk-grid-row">
		<div class="govuk-grid-column-one-third">
			{{ govukBackLink({
			  text: "Back",
			  href: "javascript:window.history.back()"
			}) }}
		</div>
		{% include "includes/header-section-signedin.html" %}
	</div>
{% endblock %}
{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">


	{% if data['deletefile'] != 0 %}
		<div class="govuk-notification-banner govuk-notification-banner--success" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
		  <div class="govuk-notification-banner__header">
			<h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
			  File removed
			</h2>
		  </div>
		  <div class="govuk-notification-banner__content">
			<h3 class="govuk-notification-banner__heading">
			  You have removed the file


				{%if data['deletefile'] == 1 %}
						{{ data['file-bulk-upload'] }}
				{%else%}
							{{ data['file-data-validation'] }}
				{%endif%}


			</h3>
		<!--	<p class="govuk-body">Upload a corrected file.</p>-->
		  </div>
		</div>



	{% endif %}


      <h1 class="govuk-heading-xl">Uploaded reports</h1>


		<details class="govuk-details" data-module="govuk-details">
                <summary class="govuk-details__summary">
                  <span class="govuk-details__summary-text">
                  I want to understand the different statuses
                  </span>
                </summary>
                <div class="govuk-details__text">

                  <p>

											All uploaded files of reports are validated by this service to check they do not contain errors or issues,
											both within the file and its report data. The file statuses help you understand the outcomes of this validation.
                  </p>


									<p>
											There are four possible statuses for validation outcomes:
									</p>
                  <ul>

                    <li class="govuk-!-margin-top-3 govuk-!-margin-bottom-3">
												<strong class="govuk-tag govuk-tag--yellow">
	               				 Processing
	             			 	  </strong>

									 				The status of ‘Processing’ means the validation of the uploaded file is in progress. You will receive an email once validation is complete.
										</li>

                    <li class="govuk-!-margin-top-3 govuk-!-margin-bottom-3">
						<strong class="govuk-tag govuk-tag--red">
               				 FILE VALIDATION FAILURE
             			 </strong>

									 		File validation failure’ occurs when an uploaded file has failed validation because either it contains a virus,
											it is corrupt, or there are faults within its file structure. Files that have failed file validation will need to be removed, corrected, and re-uploaded.
					</li>



					  <li class="govuk-!-margin-top-3 govuk-!-margin-bottom-3">
						  <strong class="govuk-tag govuk-tag--orange">
               				 DATA VALIDATION FAILURE
             			 </strong>

									 		‘Data validation failure’ occurs when the actual data within individual reports does not meet the BAR submission standards. In this situation,
											it is possible to view the report and correct any errors within the service. Alternatively, you can remove the file, correct any errors, then re-upload the corrected file.
						</li>



					  <li class="govuk-!-margin-top-3">
						  <strong class="govuk-tag govuk-tag--green">
               				 VALIDATED
             			 </strong>

									 	A status of ‘validated’ means the uploaded file (and all of its data) has passed validation and the reports it contains are ready to be submitted to the VOA.

					  </li>



                  </ul>


                </div>
      </details>

	{% if data['deletefile'] == 1 %}
		<p>Showing 1 - 3 of 3 results</p>
	{% else %}
      <p>Showing 1 - 4 of 4 results</p>
	{% endif %}

      <table class="govuk-table" data-module="moj-sortable-table">
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
         <th class="govuk-table__header" class="govuk-table__header" aria-sort="none">Filename</th>
            <th scope="col" class="govuk-table__header" aria-sort="ascending">Last updated Date and Time</th>
            <th scope="col" class="govuk-table__header" aria-sort="none">Status</th>
            <th scope="col" class="govuk-table__header" aria-sort="none">Action</th>

            <!--<th scope="col" class="govuk-table__header" aria-sort="none">Action</th>-->
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          <tr class="govuk-table__row govuk-table__row--selected">
			<td class="govuk-table__cell">localcouncil09032022.xml</td>
            <td class="govuk-table__cell">09 Mar 2022 14:45</td>
            <td class="govuk-table__cell"><strong class="govuk-tag govuk-tag--yellow">
                Processing
              </strong>
           </td>
            <td class="govuk-table__cell">
                  <a href="/bulkreport/bulk-report-progress">View reports</a>
            </td>
          </tr>

		{% if data['deletefile'] != 1 %}

          <tr class="govuk-table__row govuk-table__row--selected">
			<td class="govuk-table__cell">

					{% if data['file-bulk-upload'] != null %}

							{{ data['file-bulk-upload'] }}

					{%else%}
							localcouncilreport07022022.xml

					{%endif%}


			</td>
            <td class="govuk-table__cell">09 Mar 2022 12:27</td>
            <td class="govuk-table__cell"><strong class="govuk-tag govuk-tag--red">
                File Validation failure
              </strong>
           </td>
            <td class="govuk-table__cell">
                  <a href="/bulkreport/failed-upload-file?filetype=xml">View reports</a>
            </td>
          </tr>

		{% endif %}


	{% if data['deletefile'] != 2 %}

          <tr class="govuk-table__row govuk-table__row--selected">
			<td class="govuk-table__cell">


							localcouncilreport03022022.xls
			</td>
            <td class="govuk-table__cell">09 Mar 2022 11:27</td>
            <td class="govuk-table__cell"><strong class="govuk-tag govuk-tag--orange">
                Data Validation failure
              </strong>
           </td>
            <td class="govuk-table__cell">
                  <a href="/bulkreport/bulk-submission-report-list?dataissues=1&correctedissues=0&removerowissue=0">View reports</a>
            </td>
          </tr>

{% endif %}
          <tr class="govuk-table__row govuk-table__row--selected">
			<td class="govuk-table__cell">localcouncil07032022-1.xls</td>
            <td class="govuk-table__cell">09 Mar 2022 09:27</td>
            <td class="govuk-table__cell"><strong class="govuk-tag govuk-tag--green">
                Validated
              </strong>
           </td>
            <td class="govuk-table__cell">
                  <a href="/bulkreport/bulk-submission-report-list?dataissues=0">View reports</a>
            </td>
          </tr>






        </tbody>
      </table>
<form method="post" novalidate action="/bulkreport/select-file-format">

	<div class="govuk-button-group">


	  	 <button class="govuk-button" data-module="govuk-button" id="uploadanother" name="uploadanother" value="1">
			Upload another file
		  </button>

	 </div>

</form>
    </div>
  </div>

{% endblock %}
